tinyMCEPopup.requireLangPack();var AnchorDialog={init:function(e){var t,n,r=document.forms[0];this.editor=e,n=e.dom.getParent(e.selection.getNode(),"A"),v=e.dom.getAttrib(n,"name")||e.dom.getAttrib(n,"id"),v&&(this.action="update",r.anchorName.value=v),r.insert.value=e.getLang(n?"update":"insert")},update:function(){var e=this.editor,t,n=document.forms[0].anchorName.value,r;if(!n||!/^[a-z][a-z0-9\-\_:\.]*$/i.test(n)){tinyMCEPopup.alert("advanced_dlg.anchor_invalid");return}tinyMCEPopup.restoreSelection(),this.action!="update"&&e.selection.collapse(1);var i=e.schema.getElementRule("a");!i||i.attributes.name?r="name":r="id",t=e.dom.getParent(e.selection.getNode(),"A");if(t)t.setAttribute(r,n),t[r]=n,e.undoManager.add();else{var s={"class":"mceItemAnchor"};s[r]=n,e.execCommand("mceInsertContent",0,e.dom.createHTML("a",s,"ï»¿")),e.nodeChanged()}tinyMCEPopup.close()}};tinyMCEPopup.onInit.add(AnchorDialog.init,AnchorDialog);